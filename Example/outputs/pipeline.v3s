File_New
;

Create_Hybrid_Model
/CALIBRATION_FILE=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\Static.c3d
! /RANGE=ALL_FRAMES
;

Apply_Model_Template
/MODEL_TEMPLATE=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\CAST.mdh
/CALIBRATION_FILE=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\Static.c3d
;

Set_Subject_Weight
! /CALIBRATION_FILE=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\Static.c3d
/WEIGHT=50
;

Set_Subject_Height
! /CALIBRATION_FILE=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\Static.c3d
/HEIGHT=1.7
;

Build_Model
/CALIBRATION_FILE=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\Static.c3d
! /REBUILD_ALL_MODELS=FALSE
;

Set_Model_Metric
! /CALIBRATION_FILE=
/METRIC_NAME=addedMass_Thigh
/METRIC_VALUE=0
;

Recalc
;

Set_Model_Metric
! /CALIBRATION_FILE=
/METRIC_NAME=addedMass_Shank
/METRIC_VALUE=0
;

Recalc
;

Set_Model_Metric
! /CALIBRATION_FILE=
/METRIC_NAME=addedMass_Foot
/METRIC_VALUE=0
;

Recalc
;

Open_File
/FILE_NAME=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\run_1.c3d
;

Assign_Model_File
! /CALIBRATION_FILE=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\run_1.c3d
/MOTION_FILE_NAMES=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\run_1.c3d
! /REMOVE_EXISTING_ASSIGNMENTS=FALSE
;

Open_File
/FILE_NAME=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\run_2.c3d
;

Assign_Model_File
! /CALIBRATION_FILE=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\run_2.c3d
/MOTION_FILE_NAMES=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\c3d\run_2.c3d
! /REMOVE_EXISTING_ASSIGNMENTS=FALSE
;

Set_Pipeline_Parameter_To_List_Of_Tagged_Files
/PARAMETER_NAME=FILENAMES
/TAG_NAME=ALL_FILES
! /GET_CURRENT_SELECTED_FILES=TRUE
! /USE_SHORT_FILENAMES=false
;

For_Each
/ITERATION_PARAMETER_NAME=INDEX
/ITEMS=::FILENAMES
;

Select_Active_File
/FILE_NAME=::INDEX
;

Modify_Force_Platform_Parameters
/FP_USED=2
/FP_TYPE=4+4
/FP_CHANNEL=7+8+9+10+11+12+1+2+3+4+5+6
/FP_ORIGIN=-279.5+889+-0+279.5+889+-0
/FP_CALMATRIX=500+0+0+0+0+0+0+500+0+0+0+0+0+0+1000+0+0+0+0+0+0+800000+0+0+0+0+0+0+400000+0+0+0+0+0+0+400000+500+0+0+0+0+0+0+500+0+0+0+0+0+0+1000+0+0+0+0+0+0+800000+0+0+0+0+0+0+400000+0+0+0+0+0+0+400000
/STORE_CALMATRIX=BYCOLUMN
/FP_ZERO=0+0
!/FP_ZEROS=0+0+0+0
! /FP_CORNER1=
! /FP_CORNER2=
! /FP_CORNER3=
! /FP_CORNER4=
/FP_COP_POLYNOMIAL=0+0+0+0+0+0+0+0+0+0+0+0+1.35632e-19+1.35632e-19+1.35632e-19+1.35632e-19+1.35632e-19+1.35632e-19+1.35632e-19+1.35632e-19+1.35632e-19+1.35632e-19+1.35632e-19+1.45113e-08
/FP_COP_TRANSLATION=0+0+1.35632e-13+1.35632e-13+1.35632e-13+1.35632e-13
/FP_COP_ROTATION=1.35632e-13+2.11167e-13+0+1.35632e-13+1.35632e-13+2.20333e+14
/UPDATE_C3D_FILE=TRUE
! /MODIFY_CAL_FILE=FALSE
;

End_For_Each
/ITERATION_PARAMETER_NAME=INDEX
;

Select_Active_File
/FILE_NAME=ALL_FILES
;

Lowpass_Filter
/SIGNAL_TYPES=TARGET
! /SIGNAL_FOLDER=ORIGINAL
! /SIGNAL_NAMES=
! /RESULT_FOLDER=PROCESSED
! /RESULT_SUFFIX=
/FILTER_CLASS=BUTTERWORTH
/FREQUENCY_CUTOFF=10
! /NUM_EXTRAPOLATED=0
! /TOTAL_BUFFER_SIZE=6
! /NUM_BIDIRECTIONAL_PASSES=1
;

Set_Use_Processed_Targets
/USE_PROCESSED=TRUE
;

Select_Active_File
/FILE_NAME=ALL_FILES
;

Lowpass_Filter
/SIGNAL_TYPES=ANALOG
! /SIGNAL_FOLDER=ORIGINAL
! /SIGNAL_NAMES=LFx2+RFx2+LFy2+RFy2+LFz2+RFz2+LMx2+RMx2+LMy2+RMy2+LMz2+RMz2
! /RESULT_FOLDER=PROCESSED
! /RESULT_SUFFIX=
! /FILTER_CLASS=BUTTERWORTH
/FREQUENCY_CUTOFF=20
! /NUM_EXTRAPOLATED=0
! /TOTAL_BUFFER_SIZE=6
! /NUM_BIDIRECTIONAL_PASSES=1
;

Set_Use_Processed_Analog
/USE_PROCESSED=TRUE
;

Recalc
;

Compute_Model_Based_Data
/RESULT_NAME=R_HIP_ANG
/FUNCTION=JOINT_ANGLE
/SEGMENT=RTH
/REFERENCE_SEGMENT=RPV
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_HIP_MOM
/FUNCTION=JOINT_MOMENT
/SEGMENT=RTH
/REFERENCE_SEGMENT=
/RESOLUTION_COORDINATE_SYSTEM=RPV
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_HIP_POW
/FUNCTION=JOINT_POWER
/SEGMENT=RTH
/REFERENCE_SEGMENT=RPV
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_HIP_VEL
/FUNCTION=JOINT_VELOCITY
/SEGMENT=RTH
/REFERENCE_SEGMENT=RPV
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_KNEE_MOM
/FUNCTION=JOINT_ANGLE
/SEGMENT=RSK
/REFERENCE_SEGMENT=RTH
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_KNEE_ANG
/FUNCTION=JOINT_MOMENT
/SEGMENT=RSK
/REFERENCE_SEGMENT=
/RESOLUTION_COORDINATE_SYSTEM=RTH
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_KNEE_POW
/FUNCTION=JOINT_POWER
/SEGMENT=RSK
/REFERENCE_SEGMENT=RTH
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_KNEE_VEL
/FUNCTION=JOINT_VELOCITY
/SEGMENT=RSK
/REFERENCE_SEGMENT=RTH
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_ANK_ANG
/FUNCTION=JOINT_ANGLE
/SEGMENT=RFT
/REFERENCE_SEGMENT=RSK
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_ANK_MOM
/FUNCTION=JOINT_MOMENT
/SEGMENT=RFT
/REFERENCE_SEGMENT=
/RESOLUTION_COORDINATE_SYSTEM=RSK
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_ANK_POW
/FUNCTION=JOINT_POWER
/SEGMENT=RFT
/REFERENCE_SEGMENT=RSK
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=R_ANK_VEL
/FUNCTION=JOINT_VELOCITY
/SEGMENT=RFT
/REFERENCE_SEGMENT=RSK
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
/NORMALIZATION_METHOD=TRUE
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEXZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Set_Pipeline_Parameter_To_List_Of_Tagged_Files
/PARAMETER_NAME=FILENAMES
/TAG_NAME=ALL_FILES
! /GET_CURRENT_SELECTED_FILES=TRUE
! /USE_SHORT_FILENAMES=false
;

For_Each
/ITERATION_PARAMETER_NAME=INDEX
/ITEMS=::FILENAMES
;

Select_Active_File
/FILE_NAME=::INDEX
;

Set_Pipeline_Parameter
/PARAMETER_NAME=NEW_INDEX
/PARAMETER_VALUE=::INDEX
/PARAMETER_VALUE_SEARCH_FOR=.c3d
/PARAMETER_VALUE_REPLACE_WITH=.mat
! /PARAMETER_VALUE_PREFIX=
! /PARAMETER_VALUE_APPEND=
;

Export_Data_To_Matfile
/SIGNAL_TYPES=LINK_MODEL_BASED+LINK_MODEL_BASED+LINK_MODEL_BASED+LINK_MODEL_BASED+LINK_MODEL_BASED+LINK_MODEL_BASED+LINK_MODEL_BASED+LINK_MODEL_BASED+LINK_MODEL_BASED+LINK_MODEL_BASED+LINK_MODEL_BASED+LINK_MODEL_BASED+FORCE+FORCE+COFP+COFP+KINETIC_KINEMATIC+KINETIC_KINEMATIC+TARGET
/SIGNAL_FOLDER=ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+RFT+RFT+PROCESSED
/SIGNAL_NAMES=R_ANK_POW+R_KNEE_POW+R_HIP_POW+R_ANK_VEL+R_KNEE_VEL+R_HIP_VEL+R_ANK_MOM+R_KNEE_MOM+R_HIP_MOM+R_ANK_ANG+R_KNEE_ANG+R_HIP_ANG+FP2+FP1+FP1+FP2+COP_1+FORCE_1+L_FAL
/FILE_NAME=::NEW_INDEX
/MATLAB_NAMES=RA_POW+RK_POW+RH_POW+RA_VEL+RK_VEL+RH_VEL+RA_MOM+RK_MOM+RH_MOM+RA_ANG+RK_ANG+RH_ANG+R_FP+L_FP+L_COP+R_COP+R_COP_PROC+R_FP_PROC+L_FAL
/PARAMETER_NAMES=::INDEX
/PARAMETER_GROUPS=FILE
/OUTPUT_PARAMETER_NAMES=FILENAME
/USE_NAN_FOR_DATANOTFOUND=TRUE
;

End_For_Each
/ITERATION_PARAMETER_NAME=INDEX
;

File_Save_As
/FILE_NAME=G:\My Drive\Itay Shared Drive\Reaserch\running with weights\Code\Tools\V3D_Matlab\Example\outputs\workspcae.cmz
;

